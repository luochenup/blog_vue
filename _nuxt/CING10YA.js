const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BbMOdRHw.js","./raXDgERY.js","./Dkj_qHQx.js","./entry.FMkpf1S7.css","./ProseA.DhJIX4mV.css","./BOMktavK.js","./ProseCode.a2_W97gt.css"])))=>i.map(i=>d[i]);
import{y as C,z as $,A as Q,q as w,B as ee,k as te,h as re}from"./raXDgERY.js";import{f as ne,h as oe}from"./rJCbAzvX.js";import{C as F,y as E,g as se,c as v,b as L,r as ie,w as ae,H as N,I as R,ap as T,aq as ue,R as ce,Z as le,U as V,a4 as pe,L as M,D as fe,F as de,aa as S}from"./Dkj_qHQx.js";import{t as me}from"./CS7__6sN.js";const x=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],ge=["p","h1","h2","h3","h4","h5","h6","li"];function j(e,r){return e.type===r||typeof e.type=="object"&&e.type.tag===r||e.tag===r}function I(e){return j(e,"text")||j(e,Symbol.for("v-txt"))}function k(e){return Array.isArray(e.children)||typeof e.children=="string"?e.children:typeof e.children?.default=="function"?e.children.default():[]}function O(e){if(!e)return"";if(Array.isArray(e))return e.map(O).join("");if(I(e))return e.value||e.children||"";const r=k(e);return Array.isArray(r)?r.map(O).filter(Boolean).join(""):""}function H(e,r=[]){if(Array.isArray(e))return e.flatMap(n=>H(n,r));let t=e;return r.some(n=>n==="*"||j(e,n))&&(t=k(e)||e,!Array.isArray(t)&&ge.some(n=>j(e,n))&&(t=[t])),t}function q(e,r=[]){return e=Array.isArray(e)?e:[e],r.length?e.flatMap(t=>q(H(t,[r[0]]),r.slice(1))).filter(t=>!(I(t)&&O(t).trim()==="")):e}function U(e,r=[]){return typeof r=="string"&&(r=r.split(/[,\s]/).map(t=>t.trim()).filter(Boolean)),r.length?q(e,r).reduce((t,n)=>(I(n)?typeof t[t.length-1]=="string"?t[t.length-1]+=n.children:t.push(n.children):t.push(n),t),[]):e}function ye(e,r){return r.reduce((t,n)=>{const o=he(e,n);return o!==void 0&&(t[n]=o),t},{})}function he(e,r){return r.split(".").reduce((t,n)=>t&&t[n],e)}const D="default",z=/^@|^v-on:/,Z=/^:|^v-bind:/,_e=/^v-model/,be=["select","textarea","input"],ve=["math","svg"],Ce=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),Pe=F({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){const t=se()?.appContext?.app?.$nuxt,n=t?.$route||t?._route,{mdc:o}=t?.$config?.public||{},i=v(()=>({...o?.components?.prose&&e.prose!==!1?Ce:{},...o?.components?.map||{},...L(e.data?.mdc?.components||{}),...e.components})),l=v(()=>{const a=(e.body?.children||[]).map(u=>u.tag||u.type).filter(u=>!x.includes(u));return Array.from(new Set(a)).sort().join(".")}),c=ie({...e.data});ae(()=>e.data,a=>{Object.assign(c,a)}),await Ie(e.body,{tags:i.value});function p(a,u){const m=a.split(".").length-1;return a.split(".").reduce((g,y,P)=>P==m&&g?(g[y]=u,g[y]):typeof g=="object"?g[y]:void 0,c)}return{tags:i,contentKey:l,route:n,runtimeData:c,updateRuntimeData:p}},render(e){const{tags:r,tag:t,body:n,data:o,contentKey:i,route:l,unwrap:c,runtimeData:p,updateRuntimeData:a}=e;if(!n)return null;const u={...o,tags:r,$route:l,runtimeData:p,updateRuntimeData:a},m=t!==!1?B(t||u.component?.name||u.component||"div"):void 0;return m?E(m,{...u.component?.props,class:e.class,...this.$attrs,key:i},{default:g}):g?.();function g(){const y=W(n,E,{documentMeta:u,parentScope:u,resolveComponent:B});return y?.default?c?U(y.default(),typeof c=="string"?c.split(" "):["*"]):y.default():null}}});function xe(e,r,t,n){const{documentMeta:o,parentScope:i,resolveComponent:l}=t;if(e.type==="text")return r(T,e.value);if(e.type==="comment")return r(ue,null,e.value);const c=e.tag,p=G(e,o.tags);if(e.tag==="binding")return Te(e,r,o,i);const a=K(p)?g=>g:l;if(p==="script")return r("pre",{class:"script-to-pre"},`<script>
`+O(e)+`
<\/script>`);const u=a(p);typeof u=="object"&&(u.tag=c);const m=je(e,o);return n&&(m.key=n),r(u,m,W(e,r,{documentMeta:o,parentScope:{...i,...m},resolveComponent:a}))}function W(e,r,t){const{documentMeta:n,parentScope:o,resolveComponent:i}=t,c=(e.children||[]).reduce((a,u)=>{if(!De(u))return a[D].children.push(u),a;const m=Re(u);return a[m]=a[m]||{props:{},children:[]},u.type==="element"&&(a[m].props=u.props,a[m].children.push(...u.children||[])),a},{[D]:{props:{},children:[]}});return Object.entries(c).reduce((a,[u,{props:m,children:g}])=>(g.length&&(a[u]=(y={})=>{const P=ye(y,Object.keys(m||{}));let s=g.map((f,d)=>xe(f,r,{documentMeta:n,parentScope:{...o,...P},resolveComponent:i},String(f.props?.key||d)));return m?.unwrap&&(s=U(s,m.unwrap)),Be(s)}),a),{})}function Te(e,r,t,n={}){const o={...t.runtimeData,...n,$document:t,$doc:t},i=/\.|\[(\d+)\]/,c=(e.props?.value.trim().split(i).filter(Boolean)).reduce((a,u)=>{if(a&&u in a)return typeof a[u]=="function"?a[u]():a[u]},o),p=e.props?.defaultValue;return r(T,c??p??"")}function je(e,r){const{tag:t="",props:n={}}=e;return Object.keys(n).reduce(function(o,i){if(i==="__ignoreMap")return o;const l=n[i];if(_e.test(i))return Oe(i,l,o,r,{native:be.includes(t)});if(i==="v-bind")return we(i,l,o,r);if(z.test(i))return Ae(i,l,o,r);if(Z.test(i))return Se(i,l,o,r);const{attribute:c}=ne(oe,i);return Array.isArray(l)&&l.every(p=>typeof p=="string")?(o[c]=l.join(" "),o):(o[c]=l,o)},{})}function Oe(e,r,t,n,{native:o}){const i=e.match(/^v-model:([^=]+)/)?.[1]||"modelValue",l=o?"value":i,c=o?"onInput":`onUpdate:${i}`;return t[l]=A(r,n.runtimeData),t[c]=p=>{n.updateRuntimeData(r,o?p.target?.value:p)},t}function we(e,r,t,n){const o=A(r,n);return t=Object.assign(t,o),t}function Ae(e,r,t,n){return e=e.replace(z,""),t.on=t.on||{},t.on[e]=()=>A(r,n),t}function Se(e,r,t,n){return e=e.replace(Z,""),t[e]=A(r,n),t}const B=e=>{if(typeof e=="string"){if(x.includes(e))return e;const r=N(C(e),!1);return!e||r?.name==="AsyncComponentWrapper"||typeof r=="string"?r:"setup"in r?R(()=>new Promise(t=>t(r))):r}return e};function A(e,r){const t=e.split(".").reduce((n,o)=>typeof n=="object"?n[o]:void 0,r);return typeof t>"u"?Q(e):t}function Re(e){let r="";for(const t of Object.keys(e.props||{}))if(!(!t.startsWith("#")&&!t.startsWith("v-slot:"))){r=t.split(/[:#]/,2)[1];break}return r||D}function De(e){return e.tag==="template"}function K(e){return ve.includes(e)}function Be(e){const r=[];for(const t of e){const n=r[r.length-1];t.type===T&&n?.type===T?n.children=n.children+t.children:r.push(t)}return r}async function Ie(e,r){if(!e)return;const t=Array.from(new Set(n(e,r)));await Promise.all(t.map(async o=>{if(o?.render||o?.ssrRender||o?.__ssrInlineRender)return;const i=B(o);i?.__asyncLoader&&!i.__asyncResolved&&await i.__asyncLoader()}));function n(o,i){const l=o.tag;if(o.type==="text"||l==="binding"||o.type==="comment")return[];const c=G(o,i.tags);if(K(c))return[];const p=[];o.type!=="root"&&!x.includes(c)&&p.push(c);for(const a of o.children||[])p.push(...n(a,i));return p}}function G(e,r){const t=e.tag;return!t||typeof e.props?.__ignoreMap<"u"?t:r[t]||r[C(t)]||r[$(e.tag)]||t}const Ee=Object.assign(Pe,{__name:"MDCRenderer"}),Me=()=>w(()=>import("./BbMOdRHw.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url),$e=()=>w(()=>import("./BOMktavK.js"),__vite__mapDeps([5,1,2,3,6]),import.meta.url),Fe=()=>w(()=>import("./raXDgERY.js").then(e=>e.Y),__vite__mapDeps([1,2,3]),import.meta.url),X=["ZhiluZAboutMe","ZhiluHeader","ProseBlockquote","ProseEm","ProseH1","ProseH2","ProseH3","ProseH4","ProseH5","ProseH6","ProseHr","ProseImg","ProseLi","ProseOl","ProseP","ProseScript","ProseStrong","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","Icon"],Y=["ProseA","ProseCode","ProsePre"],Le=Object.freeze(Object.defineProperty({__proto__:null,ProseA:Me,ProseCode:$e,ProsePre:Fe,globalComponents:X,localComponents:Y},Symbol.toStringTag,{value:"Module"})),Ne={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(e){const r=["render","ssrRender","__ssrInlineRender"],t=e,n=!1,o=v(()=>{let s=t.value.body||t.value;return t.excerpt&&t.value.excerpt&&(s=t.value.excerpt),s.type==="minimal"||s.type==="minimark"?me({value:s.value}):s}),i=v(()=>!o.value?.children?.length),l=v(()=>{const{body:s,excerpt:f,...d}=t.value;return{...d,...t.data}}),c=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(s=>[s,`prose-${s}`])),{mdc:p}=ee().public||{},a=v(()=>({...p?.components?.prose&&t.prose!==!1?c:{},...p?.components?.map||{},...L(t.data?.mdc?.components||{}),...t.components})),u=v(()=>o.value?g(o.value,{tags:a.value}):{});function m(s){let f=s;if(typeof s=="string"){if(x.includes(s))return s;if(X.includes(C(s))?f=N(s,!1):Y.includes(C(s))&&(f=R(()=>w(()=>Promise.resolve().then(()=>Le),void 0,import.meta.url).then(h=>{const _=h[C(s)];return _?_():void 0}))),typeof f=="string")return f}if(!f)return f;const d=f;return"__asyncLoader"in d?d:"setup"in d?R(()=>Promise.resolve(d)):d}function g(s,f){if(!s)return;const d=Array.from(new Set(y(s,f))),b={};for(const[h,_]of d)if(!b[h]){if(typeof _=="object"&&r.some(J=>Object.hasOwnProperty.call(_,J))){b[h]=_;continue}b[h]=m(_)}return b}function y(s,f){const d=s.tag;if(s.type==="text"||d==="binding"||s.type==="comment")return[];const b=P(s,f.tags),h=[];s.type!=="root"&&!x.includes(b)&&h.push([d,b]);for(const _ of s.children||[])h.push(...y(_,f));return h}function P(s,f){const d=s.tag;return!d||typeof s.props?.__ignoreMap<"u"?d:f[d]||f[C(d)]||f[$(s.tag)]||d}return(s,f)=>i.value?le(s.$slots,"empty",{key:1,body:o.value,data:l.value,dataContentId:M(n)?e.value.id:void 0}):(V(),ce(Ee,{key:0,body:o.value,data:l.value,class:pe(t.class),tag:t.tag,prose:t.prose,unwrap:t.unwrap,components:u.value,"data-content-id":M(n)?e.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},Ze=Object.assign(Ne,{__name:"ContentRenderer"}),Ve={class:"z-comment"},ke=F({__name:"Comment",setup(e){const r=te();return fe(()=>{window.twikoo?.init?.({envId:r.twikoo?.envId,el:"#twikoo"})}),(t,n)=>(V(),de("section",Ve,[...n[0]||(n[0]=[S("h3",{class:"text-creative"}," 评论区 ",-1),S("div",{id:"twikoo"},[S("p",null,"评论加载中...")],-1)])]))}}),We=Object.assign(re(ke,[["__scopeId","data-v-8cd3c73d"]]),{__name:"PostComment"});export{Ze as _,We as a};
