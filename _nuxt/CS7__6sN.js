const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BexABL7s.js","./raXDgERY.js","./Dkj_qHQx.js","./entry.FMkpf1S7.css"])))=>i.map(i=>d[i]);
import{G as V,H as G,I as z,J,K as A,y as X,L as Y,q as Z}from"./raXDgERY.js";import{c as P,l as K,g as k,as as ee,J as te,i as ne,w as ae,o as se,j as ie,x as I,t as re,n as oe,L as R,a as ce}from"./Dkj_qHQx.js";const le={trailing:!0};function ue(e,t=25,n={}){if(n={...le,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let a,r,s=[],i,d;const u=(o,c)=>(i=de(e,o,c),i.finally(()=>{if(i=null,n.trailing&&d&&!r){const f=u(o,d);return d=null,f}}),i);return function(...o){return i?(n.trailing&&(d=o),i):new Promise(c=>{const f=!r&&n.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const h=n.leading?a:u(this,o);for(const p of s)p(h);s=[]},t),f?(a=u(this,o),c(a)):s.push(c)})}}async function de(e,t,n){return await e.apply(t,n)}function Oe(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;fe(e[0],e[1])&&e.unshift(t);let[n,a,r={}]=e;const s=P(()=>K(n));if(typeof s.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=V();r.server??=!0,r.default??=ge,r.getCachedData??=W,r.lazy??=!1,r.immediate??=!0,r.deep??=G.deep,r.dedupe??="cancel",r._functionName,i._asyncData[s.value];const d={cause:"initial",dedupe:r.dedupe};i._asyncData[s.value]?._init||(d.cachedData=r.getCachedData(s.value,i,{cause:"initial"}),i._asyncData[s.value]=x(i,s.value,a,r,d.cachedData));const u=i._asyncData[s.value];u._deps++;const o=()=>i._asyncData[s.value].execute(d),c=r.server!==!1&&i.payload.serverRendered;{let p=function(l){const g=i._asyncData[l];g?._deps&&(g._deps--,g._deps===0&&g?._off())};const m=k();if(m&&c&&r.immediate&&!m.sp&&(m.sp=[]),m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const l=m._nuxtOnBeforeMountCbs;ee(()=>{l.forEach(g=>{g()}),l.splice(0,l.length)}),te(()=>l.splice(0,l.length))}const y=m&&(m._nuxtClientOnly||ne(z,!1));c&&i.isHydrating&&(u.error.value||u.data.value!==void 0)?u.status.value=u.error.value?"error":"success":m&&(!y&&i.payload.serverRendered&&i.isHydrating||r.lazy)&&r.immediate?m._nuxtOnBeforeMountCbs.push(o):r.immediate&&u.status.value!=="success"&&o();const v=ce(),_=ae([s,...r.watch||[]],([l],[g])=>{if((l||g)&&l!==g){const w=i._asyncData[g]?.data.value!==void 0,S=i._asyncDataPromises[g]!==void 0;g&&p(g);const b={cause:"initial",dedupe:r.dedupe};if(!i._asyncData[l]?._init){let D;g&&w?D=i._asyncData[g]?.data.value:(D=r.getCachedData(l,i,{cause:"initial"}),b.cachedData=D),i._asyncData[l]=x(i,l,a,r,D)}i._asyncData[l]._deps++,(r.immediate||w||S)&&i._asyncData[l].execute(b)}else u._execute({cause:"watch",dedupe:r.dedupe})},{flush:"sync"});v&&se(()=>{_(),p(s.value)})}const f={data:$(()=>i._asyncData[s.value]?.data),pending:$(()=>i._asyncData[s.value]?.pending),status:$(()=>i._asyncData[s.value]?.status),error:$(()=>i._asyncData[s.value]?.error),refresh:(...p)=>i._asyncData[s.value].execute(...p),execute:(...p)=>i._asyncData[s.value].execute(...p),clear:()=>B(i,s.value)},h=Promise.resolve(i._asyncDataPromises[s.value]).then(()=>f);return Object.assign(h,f),h}function $(e){return P({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function fe(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function B(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=R(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function he(e,t){const n={};for(const a of t)n[a]=e[a];return n}function x(e,t,n,a,r){e.payload._errors[t]??=void 0;const s=a.getCachedData!==W,i=n,d=a.deep?ie:I,u=r!==void 0,o=e.hook("app:data:refresh",async f=>{(!f||f.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:d(u?r:a.default()),pending:P(()=>c.status.value==="pending"),error:re(e.payload._errors,t),status:I("idle"),execute:(...f)=>{const[h,p=void 0]=f,m=h&&p===void 0&&typeof h=="object"?h:{};if(e._asyncDataPromises[t]){if((m.dedupe??a.dedupe)==="defer")return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const v="cachedData"in m?m.cachedData:a.getCachedData(t,e,{cause:m.cause??"refresh:manual"});if(v!==void 0)return e.payload.data[t]=c.data.value=v,c.error.value=void 0,c.status.value="success",Promise.resolve(v)}c.status.value="pending";const y=new Promise((v,_)=>{try{v(i(e))}catch(l){_(l)}}).then(async v=>{if(y.cancelled)return e._asyncDataPromises[t];let _=v;a.transform&&(_=await a.transform(v)),a.pick&&(_=he(_,a.pick)),e.payload.data[t]=_,c.data.value=_,c.error.value=void 0,c.status.value="success"}).catch(v=>{if(y.cancelled)return e._asyncDataPromises[t];c.error.value=J(v),c.data.value=R(a.default()),c.status.value="error"}).finally(()=>{y.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=y,e._asyncDataPromises[t]},_execute:ue((...f)=>c.execute(...f),0,{leading:!0}),_default:a.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{o(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),s||oe(()=>{e._asyncData[t]?._init||(B(e,t),c.execute=()=>Promise.resolve())})}};return c}const ge=()=>{},W=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function me(e){return{type:"root",children:e.value.map(U)}}function U(e){if(typeof e=="string")return{type:"text",value:e};const[t,n,...a]=e;return{type:"element",tag:t,props:n,children:a.map(U)}}const q={content:"v3.5.0--gR9idic5jB7TvFQNiNz7aDMrXWR6zxXnw2gutwlJwuA",essay:"v3.5.0--rfjcANyiwGhGC-AWbKatVBNUnhnhBH-69uqc9m_NEbo",novel:"v3.5.0--9kX2ED_ngOL9HtWcZQs8UlOSAr13Ll_DVvurNRieJ_4"},ye={content:"_content_content",essay:"_content_essay",novel:"_content_novel",info:"_content_info"},Pe={content:{type:"page",fields:{id:"string",title:"string",body:"json",categories:"json",date:"string",description:"string",draft:"boolean",extension:"string",image:"string",meta:"json",navigation:"json",path:"string",readingTime:"json",recommend:"number",references:"json",seo:"json",stem:"string",tags:"json",type:"string",updated:"string"}},essay:{type:"page",fields:{id:"string",title:"string",body:"json",chapter:"number",cover_revert:"boolean",date:"string",description:"string",extension:"string",hideInfo:"boolean",image:"string",meta:"json",navigation:"json",path:"string",readingTime:"json",recommend:"number",seo:"json",series:"string",status:"string",stem:"string",tags:"json",updated:"string"}},novel:{type:"page",fields:{id:"string",title:"string",_path:"string",body:"json",content:"string",cover_revert:"boolean",date:"string",description:"string",extension:"string",hideInfo:"boolean",image:"string",location:"string",meta:"json",mood:"string",navigation:"json",path:"string",recommend:"number",seo:"json",stem:"string",tags:"json",updated:"string",video:"json",weather:"string"}},info:{type:"data",fields:{}}},N=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},T=e=>{const t=[],n={_conditions:t,where(a,r,s){let i;switch(r.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(s)){const d=s.map(u=>j(u)).join(", ");i=`"${String(a)}" ${r.toUpperCase()} (${d})`}else throw new TypeError(`Value for ${r} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(s)&&s.length===2)i=`"${String(a)}" ${r.toUpperCase()} ${j(s[0])} AND ${j(s[1])}`;else throw new Error(`Value for ${r} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(a)}" ${r.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(a)}" ${r.toUpperCase()} ${j(s)}`;break;default:i=`"${String(a)}" ${r} ${j(typeof s=="boolean"?Number(s):s)}`}return t.push(`${i}`),n},andWhere(a){const r=a(T());return t.push(N(r,"AND")),n},orWhere(a){const r=a(T());return t.push(N(r,"OR")),n}};return n},pe=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},a={__params:n,andWhere(s){const i=s(T());return n.conditions.push(N(i,"AND")),a},orWhere(s){const i=s(T());return n.conditions.push(N(i,"OR")),a},path(s){return a.where("path","=",A(s))},skip(s){return n.offset=s,a},where(s,i,d){return a.andWhere(u=>u.where(String(s),i,d)),a},limit(s){return n.limit=s,a},select(...s){return s.length&&n.selectedFields.push(...s),a},order(s,i){return n.orderBy.push(`"${String(s)}" ${i}`),a},async all(){return t(e,r()).then(s=>s||[])},async first(){return t(e,r({limit:1})).then(s=>s[0]||null)},async count(s="*",i=!1){return t(e,r({count:{field:String(s),distinct:i}})).then(d=>d[0].count)}};function r(s={}){let i="SELECT ";if(s?.count)i+=`COUNT(${s.count.distinct?"DISTINCT ":""}${s.count.field}) as count`;else{const u=Array.from(new Set(n.selectedFields));i+=u.length>0?u.map(o=>`"${String(o)}"`).join(", "):"*"}i+=` FROM ${ye[String(e)]}`,n.conditions.length>0&&(i+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?i+=` ORDER BY ${n.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const d=s?.limit||n.limit;return d>0&&(n.offset>0?i+=` LIMIT ${d} OFFSET ${n.offset}`:i+=` LIMIT ${d}`),i}return a};function j(e){return`'${String(e).replace(/'/g,"''")}'`}function E(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,a)=>Object.assign(n,{[a]:t[a]}),{}))}async function ve(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const a=await e.orWhere(o=>o.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:r,configs:s}=a.reduce((o,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const f=c.path.split("/").slice(0,-1).join("/")||"/";o.configs[f]={...c,...c.body}}else o.contents.push(c);return o},{configs:{},contents:[]}),i=o=>({...E(["title",...t])(o),...o.meta,...L(o?.navigation)?o.navigation:{}}),d=o=>({...E(["title",...t])(o),...L(o?.navigation)?o.navigation:{}}),u=r.reduce((o,c)=>{const f=c.path.substring(1).split("/"),h=c.stem.split("/"),p=!!h[h.length-1]?.match(/([1-9]\d*\.)?index/g),m=l=>({title:l.title,path:l.path,stem:l.stem,children:[],...d(l)}),y=m(c);if(p){const l=s[y.path];if(typeof l?.navigation<"u"&&l?.navigation===!1)return o;if(c.path!=="/"){const g=m(c);y.children.push(g)}l&&Object.assign(y,i(l))}if(f.length===1){const l=o.find(g=>g.path===y.path&&g.page===!1);return p&&l?Object.assign(l,{page:void 0,children:[...y.children||[],...l.children||[]]}):o.push(y),o}const v=f.slice(0,-1).reduce((l,g,w)=>{const S="/"+f.slice(0,w+1).join("/"),b=s[S];if(typeof b?.navigation<"u"&&b.navigation===!1)return[];let D=l.find(C=>C.path===S);if(!D){const C=b?i(b):{};D={...C,title:C.title||_e(g),path:S,stem:h.slice(0,w+1).join("/"),children:[],page:!1},l.push(D)}return D.children},o),_=v.find(l=>l.path===y.path&&l.page===!1);return _?Object.assign(_,{...y,page:void 0,children:[...y.children||[],..._.children||[]]}):v.push(y),o},[]);return F(u)}function F(e){const t=e;for(const n of t)n.children?.length?F(n.children):delete n.children;return e}function L(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const _e=e=>e.split(/[\s-]/g).map(X).join(" ");async function De(e,t,n){const{before:a=1,after:r=1,fields:s=[]}=n||{},i=await ve(e,s),d=H(i),u=d.findIndex(f=>f.path===t),o=u===-1?[]:d.slice(u-a,u),c=u===-1?[]:d.slice(u+1,u+r+1);return[...Array.from({length:a}).fill(null).concat(o).slice(o.length),...c.concat(Array.from({length:r}).fill(null)).slice(0,r)]}function H(e){return e.flatMap(n=>{const a=n.children?H(n.children):[];return n.page===!1||a.length&&a.find(r=>r.path===n.path)?a:[{...n,children:void 0},...a]})}const M=/^h([1-6])$/,be=e=>M.test(e);async function we(e,t){const{ignoredTags:n=[],extraFields:a=[]}=t||{};return(await e.where("extension","=","md").select("path","body","description","title",...a||[]).all()).flatMap(s=>Se(s,{ignoredTags:n,extraFields:a}))}function Se(e,{ignoredTags:t,extraFields:n}){const a=!e.body||e.body?.type==="root"?e.body:me(e.body),r=e.path??"",s=E(n)(e),i=[{...s,id:r,title:e.title||"",titles:[],content:(e.description||"").trim(),level:1}];if(!a?.children)return i;let d=1,u=0;const o=[e.title??""];for(const c of a.children){const f=c.tag||"";if(be(f)){const h=Number(f.match(M)?.[1]??0),p=O(c).trim();h===1?o.splice(0,o.length):h<u?o.splice(h-1,o.length-1):h===u&&o.pop(),i.push({...s,id:`${r}#${c.props?.id}`,title:p,titles:[...o],content:"",level:h}),o.push(p),u=h,d+=1}else{const h=O(c,t).trim();if(d===1&&i[d-1]?.content===h)continue;i[d-1].content=`${i[d-1].content} ${h}`.trim()}}return i}function O(e,t=[]){let n="";return e.type==="text"&&(n+=e.value||""),t.includes(e.tag??"")?"":(e.children?.length&&(n+=e.children.map(a=>O(a,t)).filter(Boolean).join("")),n)}async function Ie(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:q[String(t)],t:void 0}})}async function je(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:q[String(t)],t:void 0},method:"POST",body:{sql:n}})}const Ce=e=>{const t=Y()?.ssrContext?.event;return pe(e,(n,a)=>$e(t,n,a))};function xe(e,t,n){return Q(e,a=>De(a,t,n))}function Le(e,t){return Q(e,n=>we(n,t))}async function $e(e,t,n){return window.WebAssembly?Ne(t,n):je(e,String(t),n)}async function Ne(e,t){return await Z(()=>import("./BexABL7s.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(a=>a.loadDatabaseAdapter(e)).then(a=>a.all(t))}function Q(e,t){const n=Ce(e),a={where(r,s,i){return n.where(String(r),s,i),a},andWhere(r){return n.andWhere(r),a},orWhere(r){return n.orWhere(r),a},order(r,s){return n.order(String(r),s),a},then(r,s){return t(n).then(r,s)},catch(r){return this.then(void 0,r)},finally(r){return this.then(void 0,void 0).finally(r)},get[Symbol.toStringTag](){return"Promise"}};return a}export{xe as a,Le as b,Pe as c,ye as d,q as e,Ie as f,Ce as q,me as t,Oe as u};
