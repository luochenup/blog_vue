import{W as w,c as b,h as D}from"./raXDgERY.js";import{_ as k}from"./xFg6T9EQ.js";import{C as F,j as _,D as y,J as I,R as W,U as c,_ as N,aa as s,F as r,X as m,L as a,Y as l,a9 as n}from"./Dkj_qHQx.js";const P={class:"weather-container"},T={key:0,class:"weather-loading"},C={key:1,class:"weather-error"},B={key:2,class:"weather-content"},V={class:"city-info"},j={class:"today-weather"},x={class:"weather-main"},H={class:"weather-icon"},U={class:"temperature"},E={class:"high"},L={class:"low"},M={class:"weather-desc"},O={class:"day"},R={class:"night"},S={class:"weather-details"},X={class:"detail-item"},z={class:"detail-value"},J={class:"detail-item"},K={class:"detail-value"},Q={key:0,class:"detail-item"},Y={class:"detail-value"},Z={key:0,class:"weather-tips"},$={class:"tips-header"},q={class:"tips-content"},A={class:"update-time"},G=F({__name:"Weather",setup(ss){const o=_(null),p=_(!0),d=_(null),h=async()=>{try{p.value=!0,d.value=null;const t=await fetch("https://openapi.weathercn.com/forecasts/v1/daily/1day/102675.json?apikey=RWTK1v91pnUl4B7Q24d7aa8ifXrtU1OL");if(!t.ok)throw new Error("获取天气数据失败");const e=await t.json();o.value=e}catch(t){d.value=t instanceof Error?t.message:"获取天气数据失败"}finally{p.value=!1}},v=t=>`${t}°C`,f=t=>t.includes("晴")?"ph:sun-bold":t.includes("多云")?"ph:cloud-bold":t.includes("阴")?"ph:cloud-fog-bold":t.includes("雨")?"ph:cloud-rain-bold":t.includes("雪")?"ph:cloud-snow-bold":t.includes("雾")?"ph:cloud-fog-bold":"ph:cloud-bold";y(()=>{h()});let u;return y(()=>{u=w(h,3600*1e3)}),I(()=>{u&&clearInterval(u)}),(t,e)=>{const i=b,g=k;return c(),W(g,{card:"",title:"站长城市天气"},{default:N(()=>[s("div",P,[a(p)?(c(),r("div",T,[...e[0]||(e[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"获取天气中...",-1)])])):a(d)?(c(),r("div",C,[l(i,{name:"ph:warning-circle-bold",class:"error-icon"}),s("p",null,n(a(d)),1),s("button",{class:"retry-btn",onClick:h},"重试")])):a(o)?(c(),r("div",B,[s("div",V,[l(i,{name:"ph:map-pin-bold",class:"city-icon"}),e[1]||(e[1]=s("span",{class:"city-name"},"郑州",-1))]),s("div",j,[s("div",x,[s("div",H,[l(i,{name:f(a(o).DailyForecasts[0]?.Day?.IconPhrase||"")},null,8,["name"])]),s("div",U,[s("span",E,n(v(a(o).DailyForecasts[0]?.Temperature?.Maximum?.Value||0)),1),e[2]||(e[2]=s("span",{class:"separator"},"/",-1)),s("span",L,n(v(a(o).DailyForecasts[0]?.Temperature?.Minimum?.Value||0)),1)])]),s("div",M,[s("span",O,n(a(o).DailyForecasts[0]?.Day?.IconPhrase||"未知"),1),s("span",R,n(a(o).DailyForecasts[0]?.Night?.IconPhrase||"未知"),1)])]),s("div",S,[s("div",X,[l(i,{name:"ph:cloud-bold",class:"detail-icon"}),e[3]||(e[3]=s("span",{class:"detail-label"},"白天",-1)),s("span",z,n(a(o).DailyForecasts[0]?.Day?.IconPhrase||"未知"),1)]),s("div",J,[l(i,{name:"ph:moon-bold",class:"detail-icon"}),e[4]||(e[4]=s("span",{class:"detail-label"},"夜间",-1)),s("span",K,n(a(o).DailyForecasts[0]?.Night?.IconPhrase||"未知"),1)]),a(o).DailyForecasts[0]?.Day?.HasPrecipitation||a(o).DailyForecasts[0]?.Night?.HasPrecipitation?(c(),r("div",Q,[l(i,{name:"ph:cloud-rain-bold",class:"detail-icon"}),e[5]||(e[5]=s("span",{class:"detail-label"},"降水",-1)),s("span",Y,n(a(o).DailyForecasts[0]?.Night?.PrecipitationType||"有"),1)])):m("",!0)]),a(o).Headline?.Text?(c(),r("div",Z,[s("div",$,[l(i,{name:"ph:info-bold",class:"tips-icon"}),e[6]||(e[6]=s("span",{class:"tips-title"},"天气提示",-1))]),s("div",q,n(a(o).Headline.Text),1)])):m("",!0),s("div",A,[l(i,{name:"ph:clock-bold",class:"time-icon"}),s("span",null,"数据更新于 "+n(new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})),1)])])):m("",!0)])]),_:1})}}}),os=Object.assign(D(G,[["__scopeId","data-v-53aaa678"]]),{__name:"WidgetWeather"});export{os as default};
