import{k as D,c as P,_ as S,W as T,h as $}from"./raXDgERY.js";import{u as B}from"./DPLQhXWN.js";import{d as N}from"./DUI5qfz0.js";import{a as V}from"./Dj2IyaG6.js";import{C as j,ak as z,c as x,j as v,D as E,J as U,F as a,U as o,L as s,aa as e,Y as i,a5 as W,X as _,$ as Y,a0 as J,_ as C,a9 as d}from"./Dkj_qHQx.js";import"./CS7__6sN.js";const O={class:"featured-carousel-main"},R={key:0,class:"carousel-container"},X={class:"carousel-header"},Z={class:"featured-title"},q={class:"megaphone-container"},G={class:"card-content"},H={class:"card-title-row"},K={class:"card-title"},Q={key:0,class:"recommend-badge"},ee={key:0,class:"card-description"},te={class:"card-content"},se={class:"card-title-row"},ae={class:"card-title"},oe={key:0,class:"recommend-badge"},ne={key:0,class:"card-description"},re={key:1,class:"no-featured"},ce={class:"no-featured-icon"},le=j({__name:"FeaturedArticlesCarousel",async setup(ie){let p,g;const{data:b}=([p,g]=z(()=>B(5,1)),p=await p,g(),p),I=D(),t=x(()=>(b.value||[]).map(n=>({...n,categoryLabel:n.categories?.[0],categoryColor:I.article.categories[n.categories?.[0]]?.color,categoryIcon:N(n.categories?.[0]),showAllDate:V(n.date,n.updated)}))),w=x(()=>t.value.length>0),u=v(0),f=v(!0),c=v(null),h=v(!0),F=()=>{t.value.length!==0&&(u.value=u.value+1,u.value>=t.value.length&&setTimeout(()=>{h.value=!1,u.value=0,setTimeout(()=>{h.value=!0},50)},2200))},y=()=>{c.value&&clearInterval(c.value),c.value=T(()=>{f.value&&F()},4e3)},k=()=>{c.value&&(clearInterval(c.value),c.value=null)},L=()=>{f.value=!1,k()},M=()=>{f.value=!0,y()};return E(()=>{t.value.length>1&&y()}),U(()=>{k()}),(n,l)=>{const m=P,A=S;return o(),a("div",O,[s(w)?(o(),a("div",R,[e("div",X,[e("h2",Z,[e("div",q,[i(m,{name:"ph:megaphone-bold",class:"megaphone-icon"})]),l[0]||(l[0]=e("span",{class:"featured-text"},"精选",-1))])]),e("div",{class:"carousel-wrapper",onMouseenter:L,onMouseleave:M},[e("div",{class:"carousel-track",style:W({transform:`translateY(-${s(u)*100}%)`,transition:s(h)?"transform 2.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)":"none"})},[(o(!0),a(Y,null,J(s(t),(r,de)=>(o(),a("div",{key:`original-${r.path}`,class:"carousel-slide"},[i(A,{to:r.path,class:"featured-card"},{default:C(()=>[e("div",G,[e("div",H,[e("h3",K,d(r.title),1),r.recommend?(o(),a("div",Q,[i(m,{name:"ph:star-fill"}),e("span",null,d(r.recommend),1)])):_("",!0)]),r.description?(o(),a("p",ee,d(r.description),1)):_("",!0)])]),_:2},1032,["to"])]))),128)),s(t).length>0&&s(t)[0]?(o(),a("div",{key:`duplicate-${s(t)[0]?.path}`,class:"carousel-slide"},[i(A,{to:s(t)[0]?.path,class:"featured-card"},{default:C(()=>[e("div",te,[e("div",se,[e("h3",ae,d(s(t)[0]?.title),1),s(t)[0]?.recommend?(o(),a("div",oe,[i(m,{name:"ph:star-fill"}),e("span",null,d(s(t)[0]?.recommend),1)])):_("",!0)]),s(t)[0]?.description?(o(),a("p",ne,d(s(t)[0]?.description),1)):_("",!0)])]),_:1},8,["to"])])):_("",!0)],4)],32)])):(o(),a("div",re,[e("div",ce,[i(m,{name:"ph:star-bold"})]),l[1]||(l[1]=e("p",{class:"no-featured-text"},"暂无精选文章",-1)),l[2]||(l[2]=e("p",{class:"no-featured-hint"},"为文章设置推荐值即可显示在精选列表中",-1))]))])}}}),he=Object.assign($(le,[["__scopeId","data-v-b28e7ec3"]]),{__name:"WidgetFeaturedArticlesCarousel"});export{he as default};
