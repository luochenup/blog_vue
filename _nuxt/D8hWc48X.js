import{_ as V}from"./BLMvx1In.js";import{_ as j,b as z,h as M,k as W,m as E,l as G,r as H}from"./raXDgERY.js";import{f as w,i as P,g as f,a as X}from"./Dj2IyaG6.js";import{C as N,c as m,F as u,U as n,aa as i,Y as A,L as t,a9 as l,_ as I,X as B,R as O,ak as q,d as k,$ as T,a0 as U,a2 as J,af as K}from"./Dkj_qHQx.js";import{a as Q,b as x,c as ee,g as te}from"./DUI5qfz0.js";import"./CS7__6sN.js";const ae={class:"article-item"},se=["datetime","title"],oe={class:"article-title"},ie=["datetime","title"],ne=N({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{},references:{}},setup(C){const a=C,r=m(()=>a.useUpdated?a.updated:a.date),g=m(()=>r.value?w(new Date(r.value),"MM-dd"):""),v=m(()=>a.date?w(new Date(a.date),P(a.updated,a.date)?"MM-dd":"yyyy-MM-dd"):"");return(e,S)=>{const h=z,d=j;return n(),u("li",ae,[i("time",{datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(f))(t(r)),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(f))(t(r))},l(t(g)),9,se),A(d,{class:"article-link gradient-card",to:e.to,title:e.description},{default:I(()=>[i("span",oe,l(e.title),1),e.useUpdated&&("isTimeDiffSignificant"in e?e.isTimeDiffSignificant:t(X))(e.date,e.updated)?(n(),u("time",{key:0,class:"aux-date",datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(f))(e.date),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(f))(e.date)},"  "+l(t(v)),9,ie)):B("",!0),e.image?(n(),O(h,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):B("",!0)]),_:1},8,["to","title"])])}}}),re=Object.assign(M(ne,[["__scopeId","data-v-4ef4a8a2"]]),{__name:"ZArchive"}),le={class:"archive"},de={class:"archive-title text-creative"},ce={class:"archive-year"},ue={class:"archive-age"},pe={class:"archive-info"},me={class:"archive-list"},ge=N({__name:"archive",async setup(C){let a,r;const g=W();E({title:"归档",meta:[{name:"description",content:`${g.title}的所有文章归档。`}]});const v=g.stats.birthYear;G().setAside(["blog-stats","archive-log"]);const{data:S}=([a,r]=q(()=>Q()),a=await a,r(),a),{listSorted:h,isAscending:d,sortOrder:p}=x(S),{category:y,categories:Y,listCategorized:R}=ee(h),$=m(()=>{const c=Object.entries(te(R.value,s=>new Date(s[p.value]||0).getFullYear()));return d.value?c:c.reverse()}),Z=m(()=>$.value.reduce((c,[s,D])=>{const L=D?.reduce((o,_)=>o+_.readingTime.words,0)||0;return c[s]=H(L),c},{}));return(c,s)=>{const D=V,L=re;return n(),u("div",le,[A(D,{"is-ascending":t(d),"onUpdate:isAscending":s[0]||(s[0]=o=>k(d)?d.value=o:null),"sort-order":t(p),"onUpdate:sortOrder":s[1]||(s[1]=o=>k(p)?p.value=o:null),category:t(y),"onUpdate:category":s[2]||(s[2]=o=>k(y)?y.value=o:null),categories:t(Y)},null,8,["is-ascending","sort-order","category","categories"]),(n(!0),u(T,null,U(t($),([o,_])=>(n(),u("section",{key:o,class:"archive-group"},[i("div",de,[i("h2",ce,l(o),1),i("div",ue,[i("span",null,l(Number(o)-t(v)),1),s[3]||(s[3]=i("span",{class:"age-label"},"岁",-1))]),i("div",pe,[i("span",null,l(t(Z)[o])+"字",1),i("span",null,l(_?.length)+"篇",1)])]),i("menu",me,[A(K,{appear:"",name:"float-in"},{default:I(()=>[(n(!0),u(T,null,U(_,(b,F)=>(n(),O(L,J({key:b.path},{ref_for:!0},b,{to:b.path,"use-updated":t(p)==="updated",style:{"--delay":`${F*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)])]))),128))])}}}),Le=M(ge,[["__scopeId","data-v-ce884fb0"]]);export{Le as default};
