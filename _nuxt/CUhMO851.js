import{k,l as w,m as x,o as z,c as C,h as N}from"./raXDgERY.js";import{u as $}from"./ClTrJGzK.js";import{C as D,D as V,F as n,U as c,aa as e,Y as i,X as l,ag as L,L as o,a9 as p,al as Z,$ as B}from"./Dkj_qHQx.js";const S={class:"mobile-only"},A={class:"news-page"},E={class:"page-header"},F={class:"header-content"},H={class:"page-title"},I={key:0,class:"time-capsule"},M={class:"time-text"},T={key:0,class:"zaobao-content"},U={class:"loading-notice-container"},R={class:"loading-notice"},X={class:"zaobao-image"},Y=["src","alt"],j={key:1,class:"zaobao-loading"},q={key:2,class:"zaobao-error"},G=D({__name:"news",setup(J){const m=k(),h=w();x({title:"每日早报 - 60秒了解天下事",meta:[{name:"description",content:"每日精选热点新闻早报，60秒快速了解时事动态"},{property:"og:image",content:m.author.avatar}]});const{zaobao:t,zaobaoLoading:g,zaobaoError:_,fetchZaobao:u,refreshZaobao:v}=$();h.setAside(["weather"]),V(()=>{u()});const b=()=>{v()},f=r=>{if(!r)return"";try{const a=new Date(r),d=a.getMonth()+1,s=a.getDate(),y=a.toLocaleDateString("zh-CN",{weekday:"long"});return`${d}月${s}日 ${y}`}catch{return r}};return(r,a)=>{const d=z,s=C;return c(),n(B,null,[e("div",S,[i(d,{to:"/"})]),e("div",A,[e("div",E,[e("div",F,[e("h1",H,[i(s,{name:"ph:sun-bold",class:"title-icon"}),a[0]||(a[0]=L(" 每日早报 ",-1))]),o(t)?.datatime?(c(),n("div",I,[i(s,{name:"ph:clock-bold",class:"time-icon"}),e("span",M,p(f(o(t).datatime)),1)])):l("",!0)])]),o(t)?(c(),n("div",T,[e("div",U,[e("div",R,[i(s,{name:"ph:megaphone",class:"notice-icon megaphone-icon"}),a[1]||(a[1]=e("span",{class:"notice-text"},"拉取早报数据较慢，请耐心等待",-1))])]),e("div",X,[e("img",{src:o(t).imageUrl,alt:o(t).title||`每日早报 - ${o(t).datatime}`,loading:"lazy"},null,8,Y)])])):l("",!0),o(g)?(c(),n("div",j,[...a[2]||(a[2]=[Z('<div class="loading-spinner" data-v-8e12104c></div><p data-v-8e12104c>正在获取每日早报...</p><div class="loading-progress" data-v-8e12104c><div class="progress-bar" data-v-8e12104c><div class="progress-fill" data-v-8e12104c></div></div><span class="progress-text" data-v-8e12104c>优化后的快速加载</span></div>',3)])])):o(_)?(c(),n("div",q,[i(s,{name:"ph:warning-circle-bold",class:"error-icon"}),e("p",null,p(o(_)),1),e("button",{class:"retry-btn",onClick:b},"刷新")])):l("",!0)])],64)}}}),Q=N(G,[["__scopeId","data-v-8e12104c"]]);export{Q as default};
