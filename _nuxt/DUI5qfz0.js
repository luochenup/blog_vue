import{u as $,q as I}from"./CS7__6sN.js";import{M as O,k as q}from"./raXDgERY.js";import{at as Q,au as R,ab as _,l as f,n as k,w as M,j as g,c as m}from"./Dkj_qHQx.js";const E=(e,t)=>e.reduce((r,o)=>{const n=t(o);return r[n]||(r[n]=[]),r[n].push(o),r},{}),T=(e,t,r="asc")=>{if(!e)return[];const o=(a,s)=>`${t(a)}`.localeCompare(t(s)),n=(a,s)=>`${t(s)}`.localeCompare(t(a));return e.slice().sort(r==="desc"?n:o)},d=new WeakMap;function j(e,t,r={}){const{mode:o="replace",route:n=Q(),router:a=R(),transform:s}=r;let p=i=>i,y=i=>i;typeof s=="function"?p=s:s&&(s.get&&(p=s.get),s.set&&(y=s.set)),d.has(a)||d.set(a,new Map);const l=d.get(a);let u=n.query[e];O(()=>{u=void 0});let h;const x=_((i,C)=>(h=C,{get(){return i(),p(u!==void 0?u:f(t))},set(c){c=y(c),u!==c&&(u=c===f(t)?void 0:c,l.set(e,c===f(t)?void 0:c),C(),k(()=>{if(l.size===0)return;const w=Object.fromEntries(l.entries());l.clear();const{params:b,query:A,hash:S}=n;a[f(o)]({params:b,query:{...A,...w},hash:S})}))}}));return M(()=>n.query[e],i=>{u!==p(i)&&(u=i,h())},{flush:"sync"}),x}function G(e="posts/%"){return $(`index_${e}`,()=>I("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all(),{default:()=>[]})}function K(e,t){const{bindQuery:r}=t??{},o=r?j(r,void 0,{transform:s=>s,mode:"push"}):g(),n=m(()=>[...new Set(f(e).map(s=>s.categories?.[0]))]),a=m(()=>f(e).filter(s=>!o.value||s.categories?.[0]===o.value));return{category:o,categories:n,listCategorized:a}}function L(e){const t=q(),r=g(t.pagination.sortOrder||"date"),o=g(),n=m(()=>T(f(e),a=>a[r.value]||"",o.value?"asc":"desc"));return{sortOrder:r,isAscending:o,listSorted:n}}function N(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function P(e,t={prefix:"text"}){e||(e="tech");const{prefix:r}=t;return`${r}-${e}`}export{G as a,L as b,K as c,N as d,P as e,E as g,j as u};
